// editorjs-drag-drop@1.1.16 downloaded from https://ga.jspm.io/npm:editorjs-drag-drop@1.1.16/dist/bundle.js

var t=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var a={};!function(t,i){a=i()}(self,(()=>(()=>{var a={523:(t,a,i)=>{i.d(a,{A:()=>d});var s=i(601),c=i.n(s),l=i(314),u=i.n(l)()(c());u.push([t.id,'.ce-block--drop-target .ce-block__content:before {\n  content: "";\n  position: absolute;\n  top: 50%;\n  left: -20px;\n  margin-top: -1px;\n  height: 8px;\n  width: 8px;\n  border: solid #a0a0a0;\n  border-width: 1px 1px 0 0;\n  -webkit-transform-origin: right;\n  transform-origin: right;\n  -webkit-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n\n.ce-block--drop-target .ce-block__content:after {\n  background: none;\n}\n',""]);const d=u},314:a=>{a.exports=function(a){var i=[];return i.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=a(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},i.i=function(a,s,c,l,u){"string"==typeof a&&(a=[[null,a,void 0]]);var d={};if(c)for(var f=0;f<(this||t).length;f++){var p=(this||t)[f][0];null!=p&&(d[p]=!0)}for(var v=0;v<a.length;v++){var y=[].concat(a[v]);c&&d[y[0]]||(void 0!==u&&(void 0===y[5]||(y[1]="@layer".concat(y[5].length>0?" ".concat(y[5]):""," {").concat(y[1],"}")),y[5]=u),s&&(y[2]?(y[1]="@media ".concat(y[2]," {").concat(y[1],"}"),y[2]=s):y[2]=s),l&&(y[4]?(y[1]="@supports (".concat(y[4],") {").concat(y[1],"}"),y[4]=l):y[4]="".concat(l)),i.push(y))}},i}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var a=[];function r(t){for(var i=-1,s=0;s<a.length;s++)if(a[s].identifier===t){i=s;break}return i}function n(t,i){for(var s={},c=[],l=0;l<t.length;l++){var u=t[l],d=i.base?u[0]+i.base:u[0],f=s[d]||0,p="".concat(d," ").concat(f);s[d]=f+1;var v=r(p),y={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==v)a[v].references++,a[v].updater(y);else{var g=o(y,i);i.byIndex=l,a.splice(l,0,{identifier:p,updater:g,references:1})}c.push(p)}return c}function o(t,a){var i=a.domAPI(a);return i.update(t),function(a){if(a){if(a.css===t.css&&a.media===t.media&&a.sourceMap===t.sourceMap&&a.supports===t.supports&&a.layer===t.layer)return;i.update(t=a)}else i.remove()}}t.exports=function(t,i){var s=n(t=t||[],i=i||{});return function(t){t=t||[];for(var c=0;c<s.length;c++){var l=r(s[c]);a[l].references--}for(var u=n(t,i),d=0;d<s.length;d++){var f=r(s[d]);0===a[f].references&&(a[f].updater(),a.splice(f,1))}s=u}}},659:t=>{var a={};t.exports=function(t,i){var s=function(t){if(void 0===a[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}a[t]=i}return a[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},540:t=>{t.exports=function(t){var a=document.createElement("style");return t.setAttributes(a,t.attributes),t.insert(a,t.options),a}},56:(t,a,i)=>{t.exports=function(t){var a=i.nc;a&&t.setAttribute("nonce",a)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var a=t.insertStyleElement(t);return{update:function(i){!function(t,a,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var c=void 0!==i.layer;c&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,c&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var l=i.sourceMap;l&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),a.styleTagTransform(s,t,a.options)}(a,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(a)}}}},113:t=>{t.exports=function(t,a){if(a.styleSheet)a.styleSheet.cssText=t;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(t))}}}},i={};function r(t){var s=i[t];if(void 0!==s)return s.exports;var c=i[t]={id:t,exports:{}};return a[t](c,c.exports,r),c.exports}r.n=t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return r.d(a,{a:a}),a},r.d=(t,a)=>{for(var i in a)r.o(a,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},r.o=(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r.nc=void 0;var s={};return(()=>{r.d(s,{default:()=>B});var a=r(72),i=r.n(a),c=r(825),l=r.n(c),u=r(659),d=r.n(u),f=r(56),p=r.n(f),v=r(540),y=r.n(v),g=r(113),k=r.n(g),S=r(523),x={};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function b(t,a){for(var i=0;i<a.length;i++){var s=a[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,m(s.key),s)}}function m(t){var a=function(t,a){if("object"!=h(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=h(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==h(a)?a:a+""}x.styleTagTransform=k(),x.setAttributes=p(),x.insert=d().bind(null,"head"),x.domAPI=l(),x.insertStyleElement=y(),i()(S.A,x),S.A&&S.A.locals&&S.A.locals;var B=function(){return a=function e(a,i){var s=a.configuration,c=a.blocks,l=a.toolbar,u=a.save;!function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this||t,e),(this||t).toolbar=l,(this||t).borderStyle=i||"1px dashed #aaa",(this||t).api=c,(this||t).holder="string"==typeof s.holder?document.getElementById(s.holder):s.holder,(this||t).readOnly=s.readOnly,(this||t).startBlock=null,(this||t).endBlock=null,(this||t).save=u,this.setDragListener(),this.setDropListener()},s=[{key:"isReadOnlySupported",get:function(){return!0}}],(i=[{key:"setElementCursor",value:function(t){if(t){var a=document.createRange(),i=window.getSelection();a.setStart(t.childNodes[0],0),a.collapse(!0),i.removeAllRanges(),i.addRange(a),t.focus()}}},{key:"setDragListener",value:function(){var a=this||t;if(!(this||t).readOnly){var i=(this||t).holder.querySelector(".ce-toolbar__settings-btn");if(i)this.initializeDragListener(i);else{var s=new MutationObserver((function(t,i){var s=a.holder.querySelector(".ce-toolbar__settings-btn");s&&(a.initializeDragListener(s),i.disconnect())}));s.observe((this||t).holder,{childList:!0,subtree:!0})}}}},{key:"initializeDragListener",value:function(a){var i=this||t;a.setAttribute("draggable","true"),a.addEventListener("dragstart",(function(){i.startBlock=i.api.getCurrentBlockIndex()})),a.addEventListener("drag",(function(){if(i.toolbar.close(),!i.isTheOnlyBlock()){var t=i.holder.querySelectorAll(".ce-block"),a=i.holder.querySelector(".ce-block--drop-target");i.setElementCursor(a),i.setBorderBlocks(t,a)}}))}},{key:"setBorderBlocks",value:function(a,i){var s=this||t;Object.values(a).forEach((function(t){var c=t.querySelector(".ce-block__content");t!==i?(c.style.removeProperty("border-top"),c.style.removeProperty("border-bottom")):Object.keys(a).find((function(t){return a[t]===i}))>s.startBlock?c.style.borderBottom=s.borderStyle:c.style.borderTop=s.borderStyle}))}},{key:"setDropListener",value:function(){var a=this||t;document.addEventListener("drop",(function(t){var i=t.target;if(a.holder.contains(i)&&null!==a.startBlock){var s=a.getDropTarget(i);if(s){var c=s.querySelector(".ce-block__content");c.style.removeProperty("border-top"),c.style.removeProperty("border-bottom"),a.endBlock=a.getTargetPosition(s),a.moveBlocks()}}a.startBlock=null}))}},{key:"getDropTarget",value:function(t){return t.classList.contains("ce-block")?t:t.closest(".ce-block")}},{key:"getTargetPosition",value:function(t){return Array.from(t.parentNode.children).indexOf(t)}},{key:"isTheOnlyBlock",value:function(){return 1===(this||t).api.getBlocksCount()}},{key:"moveBlocks",value:function(){this.isTheOnlyBlock()||(this||t).api.move((this||t).endBlock,(this||t).startBlock)}}])&&b(a.prototype,i),s&&b(a,s),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,s}()})(),s.default})()));var i=a;const s=a.DragDrop;export{s as DragDrop,i as default};

